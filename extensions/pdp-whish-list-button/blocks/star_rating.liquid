{% style %}
.heart-btn-wrapper {
  text-align: center;
}

.heart-btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 22px;
  font-size: {{ block.settings.font_size }}px;
  cursor: pointer;
  border-radius: {{ block.settings.border_radius }}px;
  transition: all 0.2s ease;
  width: 100%;
  box-sizing: border-box;
  max-width: 44rem;
  border: 2px solid {{ block.settings.border_color }};
  color: {{ block.settings.text_color }};
  background: transparent;
}

.heart-btn svg {
  fill: {{ block.settings.heart_color }};
}

.heart-btn.is-active {
  background: {{ block.settings.fill_bg_color }};
  border-color: {{ block.settings.fill_bg_color }};
  color: {{ block.settings.fill_text_color }};
}

.heart-btn.is-active svg {
  fill: {{ block.settings.fill_heart_color }};
}

.heart-subtext {
  margin-top: 6px;
  font-size: 12px;
  color: {{ block.settings.sub_text_color }};
}

{% endstyle %}

<div class="heart-btn-wrapper">
  {% capture wishlist_config %}
    {"customerId": {{ customer.id | json }}, "customerEmail": {{ customer.email | strip | json }}, "productId": {{ product.id | json }}, "variantId": {{ product.selected_or_first_available_variant.id | json }}, "loginUrl": "https://shopify.com/77283033320/account?locale=en&region_country=US", "shop": {{ shop.permanent_domain | json }}}
  {% endcapture %}
  <button type="button"
     class="heart-btn"
     data-wishlist-config='{{ wishlist_config | strip_newlines | escape }}'
     data-wishlist-button
     aria-pressed="false">

    <svg width="{{ block.settings.icon_size }}px" height="{{ block.settings.icon_size }}px" viewBox="0 0 16 16">
      <path d="M1.24264 8.24264L8 15L14.7574 8.24264C15.553 7.44699 16 6.36786 16 5.24264V5.05234C16 2.8143 14.1857 1 11.9477 1C10.7166 1 9.55233 1.55959 8.78331 2.52086L8 3.5L7.21669 2.52086C6.44767 1.55959 5.28338 1 4.05234 1C1.8143 1 0 2.8143 0 5.05234V5.24264C0 6.36786 0.44699 7.44699 1.24264 8.24264Z"/>
    </svg>

    {{ block.settings.button_text }}
  </button>

  {% if block.settings.sub_text != blank %}
    <div class="heart-subtext">
      {{ block.settings.sub_text }}
    </div>
  {% endif %}
</div>
{% render 'wishlist-loader' %}

{% schema %}
{
  "name": "Heart Button",
  "target": "section",
  "settings": [
    {
      "type": "select",
      "id": "button_style",
      "label": "Button Style",
      "options": [
        { "value": "outline", "label": "Outline" },
        { "value": "fill", "label": "Fill" }
      ],
      "default": "outline"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Add to Wishlist"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link"
    },

    { "type": "color", "id": "border_color", "label": "Outline Border Color", "default": "#000000" },
    { "type": "color", "id": "text_color", "label": "Outline Text Color", "default": "#000000" },
    { "type": "color", "id": "heart_color", "label": "Outline Heart Color", "default": "#000000" },

    { "type": "color", "id": "hover_bg_color", "label": "Outline Hover Background", "default": "#000000" },
    { "type": "color", "id": "hover_border_color", "label": "Outline Hover Border", "default": "#000000" },
    { "type": "color", "id": "hover_text_color", "label": "Outline Hover Text", "default": "#ffffff" },
    { "type": "color", "id": "hover_heart_color", "label": "Outline Hover Heart", "default": "#ffffff" },

    { "type": "color", "id": "fill_bg_color", "label": "Fill Background", "default": "#000000" },
    { "type": "color", "id": "fill_text_color", "label": "Fill Text Color", "default": "#ffffff" },
    { "type": "color", "id": "fill_heart_color", "label": "Fill Heart Color", "default": "#ffffff" },
    {
      "type": "range",
      "id": "icon_size",
      "label": "Icon Size",
      "min": 12,
      "max": 32,
      "default": 18
    },

    {
      "type": "range",
      "id": "border_radius",
      "label": "Border Radius",
      "min": 0,
      "max": 40,
      "default": 6
    },
    {
      "type": "range",
      "id": "font_size",
      "label": "Font Size",
      "min": 12,
      "max": 24,
      "default": 14
    },

    {
      "type": "text",
      "id": "sub_text",
      "label": "Sub Text (below button)",
      "default": "Save for later"
    },
    {
      "type": "color",
      "id": "sub_text_color",
      "label": "Sub Text Color",
      "default": "#666666"
    }
  ]
}
{% endschema %}
